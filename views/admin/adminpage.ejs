<%-include('../partials/admin-header') %>


  <div class="home-content">
    <div class="overview-boxes">
      <div class="box">
        <div class="right-side">
          <div class="box-topic">Total Order</div>
          <div class="number"></div>
          <div class="indicator">
            <i class='bx bx-up-arrow-alt'></i>
            <span class="text">Up from yesterday</span>
          </div>
        </div>
        <i class='bx bx-cart-alt cart'></i>
      </div>
      <div class="box">
        <div class="right-side">
          <div class="box-topic">Total Sales</div>
          <div class="number">38,876</div>
          <div class="indicator">
            <i class='bx bx-up-arrow-alt'></i>
            <span class="text">Up from yesterday</span>
          </div>
        </div>
        <i class='bx bxs-cart-add cart two'></i>
      </div>
      <div class="box">
        <div class="right-side">
          <div class="box-topic">Total Profit</div>
          <div class="number">$12,876</div>
          <div class="indicator">
            <i class='bx bx-up-arrow-alt'></i>
            <span class="text">Up from yesterday</span>
          </div>
        </div>
        <i class='bx bx-cart cart three'></i>
      </div>
      <div class="box">
        <div class="right-side">
          <div class="box-topic">Total Return</div>
          <div class="number">11,086</div>
          <div class="indicator">
            <i class='bx bx-down-arrow-alt down'></i>
            <span class="text">Down From Today</span>
          </div>
        </div>
        <i class='bx bxs-cart-download cart four'></i>
      </div>
    </div>   
    <div style="width:40%;margin: top 5%;;margin-left:30%">
      <canvas style="width:100%;" id="myChart"></canvas>
    </div>
  </section>


  <script>
    const ctx = document.getElementById('myChart');

window.addEventListener('load',()=>{
  fetch('/admin/chartContent',{
    method:'get'
  }).then(res => res.json()).then(data=>{
    new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['USER', 'PLACED ORDERS','DELIVERED ORDERS','SHIPPED ORDERS','TOTAL ORDERS'],
        datasets: [{
          label: '# of Votes',
          data: [data.userlength, data.chartDetails.orderPlacedLength, data.chartDetails.deliveredOrderLength,data.chartDetails.shippedOrderLength,data.chartDetails.totalOrdersLength],
          borderWidth:5
        }]
       },
      options: {
        responsive:true
     }
  });   
  }).catch((err) => {
            console.log(err.message);
        })
  })
  </script>
  <script>
    let sidebar = document.querySelector(".sidebar");
    let sidebarBtn = document.querySelector(".sidebarBtn");
    sidebarBtn.onclick = function () {
      sidebar.classList.toggle("active");
      if (sidebar.classList.contains("active")) {
        sidebarBtn.classList.replace("bx-menu", "bx-menu-alt-right");
      } else
        sidebarBtn.classList.replace("bx-menu-alt-right", "bx-menu");
    }
  </script>

  </body>

  </html>